{"posts":[{"title":"关于双线性插值的几何理解","content":"最近看了些关于bi-linear interpolation的解释，网上其实有很多，比如wiki里就讲得很详细了。个人对于它有点几何认识，所以记录一下。它就是做2次一维线性插值。原理和公式很简单。写代码实现的时候，我会根据几何理解去写，这样就不必查公式了。 一维： x = (1-t) * x1 + t * x2; 看得出来，就和质心计算类似，越接近某个点，那么该点对我们所求点的贡献度就越大。这里x接近x1的话，t会变小，1-t会变大。然后它俩和为1（能够归一化）。所以计算方式就是“靠近的点值x对面的距离量”。 二维：（wiki上有很具体的公式，如下） 这里我想用几何形式表达这个： 根据公式可以知道： Q = Q1*(1-xx)*(1-yy)+Q2*xx*(1-yy)+Q3*(1-xx)*yy+Q4*xx*yy; 看起来有点复杂，还和边的比例有关，其实它和一维的形式没啥区别，就是1维的插值，它只考虑线段比值就可以了，2维插值，需要考虑面积比值。还是老样子的分析，比如Q点靠近Q1，那么s1就会缩小，s4就会扩大。然后s1+s2+s3+s4=1（我这里的问题是计算亚像素点，所以四周的点都是像素点，横竖间距为1）。还是用“邻近点x对面的面积”就可以了，公式可以写成： Q=Q1 * s4 + Q2 * s3 + Q3 * s2 + Q4 * s1; 这个也可以同理扩展到3维空间性插值。 ","link":"https://altfool.github.io/post/guan-yu-shuang-xian-xing-cha-zhi-de-ji-he-li-jie/"},{"title":"集成Rapsberry Pi和电动轮椅 with R-Net 设备","content":"之前和轮椅相关的工作，包括在轮椅上安装imu，和intel realsense D435i和L515相机进行数据采集（用rosbag）和构建高程图（看这里）。当然啦，还包括基础地用SLAM 进行状态估计和建图，比如用RTAB-MAP。不过个人感觉这些工作和轮椅的交互性并不是很强，而且只是基本的把设备和电脑架设在轮椅之上，真的把轮椅只当个“工具椅”。为了更好的使用工具椅，我们期待能够做一些更复杂的工作，比如导航、避障等。其实不论在电脑上还是RAspberry Pi (RPi) 上，我们都已经能够根据出发点、目的地生成一系列的waypoints，那么我们当前遇到的一个小问题就是如何成功、有效地和轮椅交互，控制轮椅基于waypoints运动。本文就是为了解决这个问题的。尝试利用RPi和电动轮椅进行集成，来做到控制轮椅运动。 本人对机械控制就是个小白，搜索了一些相关资料，大概有了基本思路，先列举下我找的资料： OPEN-SOURCE PROJECT: Remote control a power-wheelchair with a phone! 这个就是一个youtube视频描述如何用RPi和轮椅互联，并用手机通过蓝牙控制轮椅运动的。它作者列出了一些很有用的资源（如下）。 PGDT R-Net CAN library for power-wheelchairs with R-Net electronics 这个repo的东西就是关于如何用RPi + CAN + R-Net操控轮椅的。R-Net是一些轮椅带有的控制模块。CAN 是Controller Area Network (CAN) ，它帮助RPi进行总线控制。用CAN的原因是，它能把RPi和轮椅的R-Net连接起来（我们下面会看到R-Net的特殊插口形状）。 Discord 其实很多人也在hack电动轮椅，进入discord你会发现有很多大佬给的instructions和信息，真的很有帮助。 其他连接 https://github.com/teslaistra/wheelchair https://github.com/redragonx/r-net-bluetooth-control-app 所以总体上，我们需要RPi，PiCAN(如PiCAN2)和电动轮椅带R-Net设备我们就可以基本控制了。 下面我们说下轮椅设备，我们实验室目前使用的是Permobil C400，其实我都不太懂它的具体结构，网上英文版的说明书把我看的头大。关键我给它公司打电话，它技术人员还表示，他们不会为如何hack轮椅提供任何帮助，说会违反FDA。唉，然后with limited help from them，我只能自己找网上的大神帮忙了。 轮椅： 它右侧有一个VSI joystick的控制面板，用于控制轮椅运动。这个VSI joystic就是用的R-Net结构和轮椅互联的。我当时看到这个都想把它断连，然后把RPi接上去。幸好，这个轮椅背部提供了多个R-Net结构，所以我们可以把手控VSI joystick和RPi同时接入而不冲突。 R-Net 结构： 这个R-Net就是VSI joystick控制器的所属的那个。 轮椅背部多个R-Net结构： 这里可以看到轮椅背部其实提供了很多个R-Net结构。所以我们可以放过它自带的VSI joystick的控制接口啦😁。网上还有人把两个VSI joystick控制接口都插上轮椅，一起运作的，见这个视频。说是，有些电动轮椅一出厂，就有主/副控制器（接口）。 接下来就是根据discord里面大佬的instructions和信息，选择和我们这个轮椅适配的RPi和PiCAN，然后接上进行测验。之所以选适配，是因为discord里面有大佬描述了电压不配/充足的问题，所以建议看看discord里面大佬的留言，选择合适的。 【To be continued】 ","link":"https://altfool.github.io/post/ji-cheng-rapsberry-pi-he-dian-dong-lun-yi-with-r-net-she-bei/"},{"title":"CMakeList里的package/头文件夹名/库文件夹名的对照","content":"1. Include Package into CMake 开始接触CMAKE创建c++工程写SLAM。 CMake里面调用其他库的方法已经了解了，但是每次调用的时候那个package名/头文件夹名和库文件夹名总让人很困惑。就不明白为啥不一致（强迫症的克星啊），也许以后能理解这一点。 目前加入其他库的指令有： find_package(xxx REQUIRED), if not in system path, you can try this : find_package(xxx REQUIRED PATHS xxx) include_directories(${xxx_INCLUDE_DIRS}) 注意，这里的&quot;_INCLUDE_DIRS&quot;全部要大写，而xxx则是分情况； target_link_libraries(xxx ${xxx_LIBRARIES}) 这里的&quot;_LIBRARIES&quot;同样全部大写，有的库只要写&quot;_LIBS&quot;作为后缀也能用，比如&quot;OpenCV_LIBS&quot;，我真的很讨厌这样（played with 几个不同的库包过），干脆就全部写完整的libraries就好了。 2. Packages in SLAM/C++ 目前接触到的库包包含了：Eigen, Sophus, OpenCV, Ceres, g2o, Pangolin等 (Sophus和Eigen,Pangolin, OpenCV库一起出现的时候，记得把Sophus放最后。。。或者自己尝试调顺序，因为它有时候会链接出错。。。。迷之bug) 3. Reference 包名/头文件夹/库文件夹对照如下： &lt;package&gt; &lt;include_directory&gt; &lt;link_library&gt; #include &lt;名字&gt; Eigen3 EIGEN3_ # (only header files) Eigen/xxx Sophus SOPHUS_ # (only header files) sophus/xxx OpenCV OpenCV_ OpenCV_ opencv2/xxx Ceres CERES_ CERES_ ceres/xxx G2O G2O_ G2O_ g2o/xxx Pangolin Pangolin_ Pangolin_ pangolin/xxx 有些时候include_directory用全大写或者原包名都是可以的，太混乱了，我就按自己的格式记录的。有些可能还和package版本相关，如果CMake添加不成功，可以看看path，包名啥的。 另外，G2O编译吐了，从github官网上下载的是成功的，你也能成功编译并添加到系统里，不过它就是link不了。才发现bleeding edge版本的经常会崩，还是老老实实用它release的几个稳定版本tag吧。而且官网的g2o它还提供了自己的cmake module，记得把它加到自己的CMAKE_MODULE_PATH。用如下类似的command: list(APPEND CMAKE_MODULE_PATH ${PROJECT_SOURCE_DIR}/ cmake_module_dir) &nbsp;&nbsp;&nbsp;&nbsp;Jaja，用自己写的find_package(g2o)是找不全那个G2O的，而且有时候header files也找不到。劝你还是添加官网提供的FindG2O.cmake模块吧。使用官网提供的模块后，所有G2O全部就大写了。不过官网是没有${G2O_LIBRARIES}或者${G2O_LIBS}这两个变量的，你只能一个一个选择，比如${G2O_STUFF_LIBRARY}，${G2O_CORE_LIBRARY}，${G2O_CLI_LIBRARY}，${G2O_SOLVER_CHOLMOD}等。或者根据官网cmake模块中有的libraries自己设置那2个变量，如：set(G2O_LIBRARIES ${G2O_STUFF_LIBRARY} ${G2O_CORE_LIBRARY}...)来使用。 4. Debug CMakeLists.txt 文件 有时候，真的能给CMAKE跪下了。它说明文档里有些说能用的功能，然后用不了，作为一个小白，我只能说一个一个尝试，交学费，把能用的自己记录下来： set(CMAKE_FIND_DEBUG_MODE TRUE) message(STATUS &quot;var: ${var}&quot;) 用这个命令check你是否真的find那个package，它相关的头文件和库文件是否存在。 5. Compile New Package 这里再记录下每次安装新package需要的步骤。当然，如果ubuntu的自带包管理可以直接安装，就直接安装啦。 download source code, like: git clone https://xxxxx inside directory: mkdir build &amp; cd build cmake .. (.. 表示上层目录) make sudo make install ( 如果不想装系统路径下，那么在CMake里find_package记得注明package当前的path) ","link":"https://altfool.github.io/post/cmakelist-li-de-packagetou-wen-jian-jia-ming-ku-wen-jian-jia-ming-de-dui-zhao/"},{"title":"Hello Gridea","content":"Markdown cheat sheet link: https://www.markdownguide.org/cheat-sheet/ 👏 欢迎使用 Gridea ！ ✍️ Gridea 一个静态博客写作客户端。你可以用它来记录你的生活、心情、知识、笔记、创意... ... <!-- more --> Github Gridea 主页 示例网站 特性👇 📝 你可以使用最酷的 Markdown 语法，进行快速创作 🌉 你可以给文章配上精美的封面图和在文章任意位置插入图片 🏷️ 你可以对文章进行标签分组 📋 你可以自定义菜单，甚至可以创建外部链接菜单 💻 你可以在 Windows，MacOS 或 Linux 设备上使用此客户端 🌎 你可以使用 𝖦𝗂𝗍𝗁𝗎𝖻 𝖯𝖺𝗀𝖾𝗌 或 Coding Pages 向世界展示，未来将支持更多平台 💬 你可以进行简单的配置，接入 Gitalk 或 DisqusJS 评论系统 🇬🇧 你可以使用中文简体或英语 🌁 你可以任意使用应用内默认主题或任意第三方主题，强大的主题自定义能力 🖥 你可以自定义源文件夹，利用 OneDrive、百度网盘、iCloud、Dropbox 等进行多设备同步 🌱 当然 Gridea 还很年轻，有很多不足，但请相信，它会不停向前 🏃 未来，它一定会成为你离不开的伙伴 尽情发挥你的才华吧！ 😘 Enjoy~ ","link":"https://altfool.github.io/post/hello-gridea/"}]}